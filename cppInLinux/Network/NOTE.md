# 1 TCP Server
- 建立链接：过程是不需要代码显示参与的
- io概念：文件描述符fd，socket
- 你的程序主动关闭 TCP 连接 → 就会产生 TIME_WAIT
- 为什么需要 TIME_WAIT？
    - 保证旧连接的残余报文不会误入新连接
    - 确保对端成功接收到你的最后一个 ACK
- 为什么出现大量的CLOSE_WAIT？
    - 客户端主动关闭连接，但服务器没有收到 ACK
    - 服务器端程序崩溃或异常退出，但还没有释放 socket 资源
- 一请求一线程很难做到高并发

# 2 Multi-io
- select，当连接来了，select 就会返回，然后再调用 accept 处理连接\
    缺点：（copy, 每次都要遍历io集合，返回就绪集合）
    - 参数较多不利于维护
    - 每次需要把待检测io集合，拷贝到内核
    - 对io的数量有限制
- epoll触发有水平触发（LT）和边沿触发(ET)两种模式
    - LT模式：只要有事件发生，立即通知, 用在：内容头有长度的情况
    - ET模式：只有全部事件都处理完毕，才通知
- epoll有没有mmap?
    - epoll本身是内核态的，不支持 mmap
- epoll是否线程安全？
    - epoll本身是内核态的，不支持 mmap，所以不支持线程安全
- reactor 模式：
    - 将面向io的写法，改成了面向事件的处理方式
